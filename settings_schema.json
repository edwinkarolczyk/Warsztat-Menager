{
  "magazyn": {
    "type": "object",
    "title": "Magazyn",
    "properties": {
      "require_reauth": {
        "type": "boolean",
        "title": "Wymagaj re-autoryzacji przy operacjach (PZ/WZ/edycja)",
        "default": true
      },
      "categories": {
        "type": "array",
        "title": "Kategorie materiałów (widoczne w PZ i filtrach)",
        "items": { "type": "string" },
        "default": ["profil", "rura", "półprodukt"]
      },
      "types": {
        "type": "array",
        "title": "Typy materiału (np. stal, aluminium…) – edytowalne",
        "items": { "type": "string" },
        "default": ["stal", "aluminium", "miedź", "teflon"]
      },
      "units": {
        "type": "array",
        "title": "Jednostki miary",
        "items": { "type": "string" },
        "default": ["szt", "mb"]
      },
      "default_unit_by_category": {
        "type": "object",
        "title": "Domyślna jednostka per kategoria",
        "properties": {
          "profil": { "type": "string", "default": "mb" },
          "rura": { "type": "string", "default": "mb" },
          "półprodukt": { "type": "string", "default": "szt" }
        },
        "additionalProperties": { "type": "string" },
        "default": { "profil": "mb", "rura": "mb", "półprodukt": "szt" }
      },
      "rounding": {
        "type": "object",
        "title": "Zasady zaokrągleń",
        "properties": {
          "enforce_integer_for_szt": { "type": "boolean", "default": true },
          "mb_precision": { "type": "integer", "minimum": 0, "maximum": 6, "default": 3 }
        },
        "required": ["enforce_integer_for_szt", "mb_precision"]
      },
      "ui_new_table": {
        "type": "boolean",
        "title": "Używaj nowego widoku tabeli (ID/Typ/Rozmiar/Nazwa/Stan/Zadania)",
        "default": true
      },
      "alerts": {
        "type": "object",
        "title": "Alerty magazynowe",
        "properties": {
          "low_stock_badge": { "type": "boolean", "default": true }
        }
      },
      "reservations": {
        "type": "object",
        "title": "Rezerwacje materiału pod zlecenia",
        "properties": {
          "enabled": { "type": "boolean", "default": true }
        }
      }
    },
    "required": ["require_reauth", "categories", "types", "units", "default_unit_by_category", "rounding", "ui_new_table"]
  },
  "tabs": [
    {
      "id": "ui",
      "title": "System",
      "groups": [
        {
          "key": "appearance",
          "label": "Wygląd",
          "fields": [
            {
              "key": "ui.theme",
              "type": "enum",
              "label": "Motyw",
              "description": "Wybierz motyw aplikacji",
              "tooltip": "light lub dark",
              "values": [
                "light",
                "dark"
              ]
            },
            {
              "key": "ui.language",
              "type": "enum",
              "label": "Język interfejsu",
              "description": "Wybierz język interfejsu",
              "tooltip": "np. pl lub en",
              "values": [
                "pl",
                "en"
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "uzytkownicy",
      "title": "Użytkownicy",
      "groups": [
        {
          "key": "auth",
          "label": "Logowanie",
          "fields": [
            {
              "key": "auth.required",
              "type": "bool",
              "label": "Wymagaj logowania"
            },
            {
              "key": "auth.session_timeout_min",
              "type": "int",
              "label": "Limit czasu sesji (min)",
              "min": 1,
              "max": 240
            }
          ]
        },
        {
          "key": "security",
          "label": "Bezpieczeństwo",
          "fields": [
            {
              "key": "secrets.admin_pin",
              "type": "string",
              "widget": "password",
              "label": "PIN administratora"
            }
          ]
        }
      ]
    },
    {
      "id": "hala",
      "title": "Hala",
      "groups": [
        {
          "key": "hall",
          "label": "Ustawienia hali",
          "fields": [
            {
              "key": "hall.grid_size_px",
              "type": "int",
              "label": "Rozmiar siatki (px)",
              "min": 1,
              "max": 100
            },
            {
              "key": "hall.drag_snap_px",
              "type": "int",
              "label": "Przyciąganie (px)",
              "min": 1,
              "max": 100
            },
            {
              "key": "hall.triple_confirm_delete",
              "type": "bool",
              "label": "Potrójne potwierdzanie usuwania"
            }
          ]
        }
      ]
    },
    {
      "id": "narzedzia",
      "title": "Narzędzia",
      "groups": [
        {
          "key": "narzedzia",
          "label": "Narzędzia",
          "fields": [
            {
              "key": "szablony_zadan_narzedzia",
              "type": "array",
              "label": "Szablony zadań",
              "value_type": "string"
            },
            {
              "key": "typy_narzedzi",
              "type": "array",
              "label": "Typy narzędzi",
              "value_type": "string"
            },
            {
              "key": "tools.collections_enabled",
              "type": "array",
              "label": "Włączone kolekcje",
              "value_type": "string",
              "default": [
                "NN",
                "ST"
              ]
            },
            {
              "key": "tools.default_collection",
              "type": "string",
              "label": "Domyślna kolekcja",
              "default": "NN"
            },
            {
              "key": "tools.auto_check_on_status_global",
              "type": "array",
              "label": "Automatyczne sprawdzanie dla statusów globalnych",
              "value_type": "string",
              "default": [
                "sprawne",
                "zakończone"
              ]
            },
            {
              "key": "tools.collections_paths",
              "type": "dict",
              "label": "Ścieżki kolekcji",
              "key_type": "string",
              "value_type": "string",
              "default": {}
            }
          ]
        }
      ]
    },
    {
      "id": "magazyn",
      "title": "Magazyn",
      "groups": [
        {
          "key": "magazyn",
          "label": "Magazyn",
          "fields": [
            {
              "key": "magazyn_rezerwacje",
              "type": "bool",
              "label": "Rezerwacje"
            },
            {
              "key": "magazyn_precision_mb",
              "type": "int",
              "label": "Precyzja (MB)",
              "min": 0,
              "max": 6
            },
            {
              "key": "magazyn.require_reauth",
              "type": "bool",
              "label": "Re-auth przy zmianach",
              "default": true
            }
          ]
        },
        {
          "key": "produkty",
          "label": "Produkty",
          "fields": [
            {
              "key": "produkty_dir",
              "type": "path",
              "widget": "dir",
              "label": "Folder produktów"
            },
            {
              "key": "produkty_auto_sync",
              "type": "bool",
              "label": "Auto synchronizacja"
            }
          ]
        },
        {
          "key": "polprodukty",
          "label": "Półprodukty",
          "fields": [
            {
              "key": "polprodukty_dir",
              "type": "path",
              "widget": "dir",
              "label": "Folder półproduktów"
            },
            {
              "key": "polprodukty_auto_sync",
              "type": "bool",
              "label": "Auto synchronizacja"
            }
          ]
        },
        {
          "key": "surowce",
          "label": "Surowce",
          "fields": [
            {
              "key": "surowce_file",
              "type": "path",
              "widget": "file",
              "label": "Plik surowców"
            },
            {
              "key": "progi_alertow_surowce",
              "type": "dict",
              "label": "Progi alertów surowców",
              "key_type": "string",
              "value_type": "int"
            }
          ]
        }
      ]
    },
    {
      "id": "zlecenia",
      "title": "Zlecenia",
      "groups": [
        {
          "key": "zlecenia",
          "label": "Zlecenia",
          "fields": [
            {
              "key": "progi_alertow_pct",
              "type": "array",
              "label": "Progi alertów (%)",
              "value_type": "int"
            },
            {
              "key": "czynnosci_technologiczne",
              "type": "array",
              "label": "Czynności technologiczne",
              "value_type": "string"
            }
          ]
        }
      ]
    },
    {
      "id": "update",
      "title": "Aktualizacje & Kopie",
      "groups": [
        {
          "key": "updates",
          "label": "Aktualizacje",
          "fields": [
            {
              "key": "updates.auto",
              "type": "bool",
              "label": "Automatyczne aktualizacje"
            },
            {
              "key": "updates.remote",
              "type": "string",
              "label": "Zdalne repozytorium"
            },
            {
              "key": "updates.branch",
              "type": "string",
              "label": "Gałąź aktualizacji"
            },
            {
              "key": "updates.push_branch",
              "type": "string",
              "label": "Gałąź do wysyłki"
            }
          ]
        },
        {
          "key": "backup",
          "label": "Kopie zapasowe",
          "fields": [
            {
              "key": "backup.folder",
              "type": "path",
              "widget": "dir",
              "label": "Folder kopii"
            },
            {
              "key": "backup.keep_last",
              "type": "int",
              "label": "Ilość kopii",
              "min": 1,
              "max": 50
            },
            {
              "key": "backup.cloud.url",
              "type": "string",
              "label": "Adres chmury"
            },
            {
              "key": "backup.cloud.username",
              "type": "string",
              "label": "Użytkownik"
            },
            {
              "key": "backup.cloud.password",
              "type": "string",
              "widget": "password",
              "label": "Hasło"
            },
            {
              "key": "backup.cloud.folder",
              "type": "string",
              "label": "Folder w chmurze"
            }
          ]
        }
      ]
    },
    {
      "id": "profile",
      "title": "Profile",
      "groups": [
        {
          "key": "profiles_general",
          "label": "Ogólne",
          "fields": [
            {
              "key": "profiles.tab_enabled",
              "type": "bool",
              "label": "Włącz kartę profilu"
            },
            {
              "key": "profiles.show_name_in_header",
              "type": "bool",
              "label": "Pokaż zalogowanego w nagłówku"
            },
            {
              "key": "profiles.avatar_dir",
              "type": "path",
              "widget": "dir",
              "label": "Folder awatarów"
            },
            {
              "key": "profiles.allow_pin_change",
              "type": "bool",
              "label": "Pozwól na zmianę PIN"
            },
            {
              "key": "profiles.task_default_deadline_days",
              "type": "int",
              "label": "Domyślny termin zadania (dni)"
            }
          ]
        },
        {
          "key": "profiles_fields",
          "label": "Widoczność pól",
          "fields": [
            {
              "key": "profiles.fields_visible",
              "type": "array",
              "label": "Pola w profilu",
              "value_type": "string"
            },
            {
              "key": "profiles.fields_editable_by_user",
              "type": "array",
              "label": "Pola edytowalne przez użytkownika",
              "value_type": "string"
            }
          ]
        }
      ]
    },
    {
      "id": "tests",
      "title": "Testy",
      "groups": [
        {
          "key": "tests",
          "label": "Testy",
          "fields": [
            {
              "key": "tests.run",
              "type": "button",
              "label": "Uruchom testy"
            }
          ]
        }
      ]
    }
  ]
}

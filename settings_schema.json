{
  "magazyn": {
    "type": "object",
    "title": "Magazyn",
    "properties": {
      "require_reauth": {
        "type": "boolean",
        "title": "Wymagaj re-autoryzacji przy PZ/WZ",
        "default": true
      },
      "rounding": {
        "type": "object",
        "title": "Zaokrąglanie",
        "properties": {
          "mb_precision": {
            "type": "integer",
            "title": "Precyzja dla 'mb'",
            "minimum": 0,
            "maximum": 6,
            "default": 3
          },
          "enforce_integer_for_szt": {
            "type": "boolean",
            "title": "Wymuszaj liczby całkowite dla 'szt'",
            "default": true
          }
        }
      },
      "round_quantities": { "type": "boolean", "default": true },
      "default_unit": {
        "type": "string",
        "default": "szt",
        "enum": ["szt", "mb"]
      },
      "dim_in_mm": { "type": "boolean", "default": true },
      "len_in_mb": { "type": "boolean", "default": true },
      "pz": {
        "type": "object",
        "properties": {
          "prefix": { "type": "string", "default": "PZ" },
          "width": {
            "type": "integer",
            "default": 5,
            "minimum": 1,
            "maximum": 10
          },
          "reset_daily": { "type": "boolean", "default": false },
          "seq_file": {
            "type": "string",
            "default": "data/magazyn/_seq_pz.json"
          }
        }
      },
      "auto_rezerwacje": { "type": "boolean", "default": true },
      "rezerwacje_only_started_orders": { "type": "boolean", "default": true },
      "rezerwacje_positive_only": { "type": "boolean", "default": true },
      "alert_procent": {
        "type": "integer",
        "default": 10,
        "minimum": 1,
        "maximum": 100
      },
      "low_stock_auto_order": { "type": "boolean", "default": true },
      "perms": {
        "type": "object",
        "properties": {
          "brygadzista": {
            "type": "object",
            "properties": {
              "edit": { "type": "boolean", "default": true },
              "pz": { "type": "boolean", "default": false }
            }
          },
          "magazynier": {
            "type": "object",
            "properties": {
              "edit": { "type": "boolean", "default": true },
              "pz": { "type": "boolean", "default": true }
            }
          }
        }
      }
    }
  },
  "orders": {
    "type": "object",
    "title": "Ustawienia zleceń",
    "properties": {
      "id_width": { "type": "integer", "default": 4, "minimum": 3, "maximum": 6 },
      "types": {
        "type": "object",
        "properties": {
          "ZW": {
            "type": "object",
            "properties": {
              "enabled": { "type": "boolean", "default": true },
              "label": { "type": "string", "default": "Zlecenie wewnętrzne" },
              "prefix": { "type": "string", "default": "ZW-" },
              "reserve_by_default": { "type": "boolean", "default": false },
              "allow_products": { "type": "boolean", "default": true },
              "bom_required": { "type": "boolean", "default": true },
              "statuses": {
                "type": "array",
                "items": { "type": "string" },
                "default": ["nowe","w trakcie","zakończone","anulowane"]
              }
            },
            "required": ["enabled", "label", "prefix", "statuses"]
          },
          "ZN": {
            "type": "object",
            "properties": {
              "enabled": { "type": "boolean", "default": true },
              "label": { "type": "string", "default": "Zlecenie na narzędzie" },
              "prefix": { "type": "string", "default": "ZN-" },
              "reserve_by_default": { "type": "boolean", "default": true },
              "allow_old_tools": { "type": "boolean", "default": true },
              "tools_range": {
                "type": "array",
                "items": { "type": "integer" },
                "default": [500,1000]
              },
              "statuses": {
                "type": "array",
                "items": { "type": "string" },
                "default": ["projekt","w budowie","ostrzenie","naprawa","odbiór","na produkcji","anulowane"]
              }
            },
            "required": ["enabled", "label", "prefix", "statuses"]
          },
          "ZM": {
            "type": "object",
            "properties": {
              "enabled": { "type": "boolean", "default": true },
              "label": { "type": "string", "default": "Naprawa/awaria maszyny" },
              "prefix": { "type": "string", "default": "ZM-" },
              "reserve_by_default": { "type": "boolean", "default": true },
              "require_description": { "type": "boolean", "default": true },
              "urgency_colors": {
                "type": "object",
                "default": {
                  "wysoki": "blink_red",
                  "normalny": "yellow",
                  "niski": "green"
                }
              },
              "statuses": {
                "type": "array",
                "items": { "type": "string" },
                "default": ["awaria zgłoszona","diagnoza","w naprawie","test","sprawdzona","zakończone","anulowane"]
              }
            },
            "required": ["enabled", "label", "prefix", "statuses"]
          }
        },
        "required": ["ZW", "ZN", "ZM"]
      }
    },
    "required": ["id_width", "types"]
  },
  "tabs": [
    {
      "id": "ui",
      "title": "System",
      "description": "Ustawienia ogólne programu (język, motyw, ścieżki, auto-aktualizacje).",
      "tooltip": "Zmiany w tym dziale wpływają globalnie na cały program.",
      "icon": "settings",
      "sections": []
    },
    {
      "id": "uzytkownicy",
      "title": "Użytkownicy",
      "description": "Role i uprawnienia użytkowników. (Edycja listy w subzakładce).",
      "tooltip": "Konfiguruj dostęp do modułów i status kont.",
      "icon": "users",
      "subtabs": [
        {
          "id": "uprawnienia",
          "title": "Uprawnienia",
          "description": "Konfiguracja ról i dostępu do modułów.",
          "sections": []
        },
        {
          "id": "zarzadzanie_lista",
          "title": "Zarządzanie (lista)",
          "description": "Przegląd i edycja użytkowników (aktywacja, reset hasła).",
          "sections": []
        }
      ],
      "sections": []
    },
    {
      "id": "profile",
      "title": "Profile",
      "description": "Dane zalogowanego użytkownika (nazwa również obok „Wyloguj”).",
      "tooltip": "Podgląd podstawowych danych aktualnego użytkownika.",
      "icon": "id-card",
      "sections": []
    },
    {
      "id": "hala",
      "title": "Hala",
      "description": "Widok hali: tło JPEG, siatka 20 cm = 4 px (1 kratka = 0,05 m), numer hali wyświetlany na maszynie.",
      "tooltip": "Pozycje maszyn zapisywane są do pliku `maszyny.json`.",
      "icon": "layout",
      "sections": []
    },
    {
      "id": "narzedzia",
      "title": "Narzędzia",
      "description": "Konfiguracja typów, statusów i zadań. Nowe NN (001–499) w diagramach zaznaczamy na żółto.",
      "tooltip": "Definiuj typy/statusy i reguły zachowania w module Narzędzia.",
      "icon": "wrench",
      "subtabs": [
        {
          "id": "typy_statusy",
          "title": "Typy i statusy",
          "description": "Definicje typów narzędzi, statusów i list zadań w statusach.",
          "sections": []
        },
        {
          "id": "reguly",
          "title": "Reguły",
          "description": "Automatyczne wymuszenia (np. zmiana na „sprawne” zaznacza [x] istniejące zadania).",
          "sections": []
        }
      ],
      "sections": []
    },
    {
      "id": "zlecenia",
      "title": "Zlecenia",
      "description": "Ustawienia modułu zleceń: statusy, kreator (osobne okno, ciemny motyw).",
      "tooltip": "Statusy są wybierane z listy (Combobox) podczas edycji zlecenia.",
      "icon": "clipboard-list",
      "subtabs": [
        {
          "id": "statusy",
          "title": "Statusy",
          "description": "Predefiniowane statusy zleceń (dwuklik w edycji otwiera listę wyboru).",
          "sections": []
        },
        {
          "id": "kreator",
          "title": "Kreator",
          "description": "Opcje kreatora dodawania zlecenia (Toplevel, zgodny motyw WM).",
          "sections": []
        }
      ],
      "sections": []
    },
    {
      "id": "magazyn",
      "title": "Magazyn",
      "description": "Ustawienia magazynu i BOM. Stany aktualizowane w czasie rzeczywistym.",
      "tooltip": "Definiuj progi alertów i struktury produktów (BOM) w `data/produkty/`.",
      "icon": "boxes",
      "subtabs": [
        {
          "id": "ustawienia_magazynu",
          "title": "Ustawienia magazynu",
          "description": "Progi alertów (np. 10%), lokalizacja danych, integracja ze zleceniami.",
          "sections": []
        },
        {
          "id": "produkty_bom",
          "title": "Produkty (BOM)",
          "description": "Struktury produktów oraz powiązania półproduktów/części.",
          "sections": []
        }
      ],
      "sections": []
    },
    {
      "id": "orders",
      "title": "Zamówienia",
      "description": "Obsługa braków materiałowych: po wykryciu braku zapytać „Czy zamówić brakujący materiał?”.",
      "tooltip": "Twórz zamówienia materiałów po detekcji braków.",
      "icon": "shopping-cart",
      "sections": []
    },
    {
      "id": "update",
      "title": "Aktualizacje & Kopie",
      "description": "Kopie zapasowe, przywracanie i wersjonowanie. Operacje wykonywane z dedykowanego modułu.",
      "tooltip": "Konfiguracja/Opis – same operacje uruchamiane są poza tym panelem.",
      "icon": "history",
      "sections": []
    },
    {
      "id": "tests",
      "title": "[DEV] Testy",
      "description": "Zakładka testowa – tylko do użytku deweloperskiego.",
      "tooltip": "Opcje techniczne używane tylko podczas prac deweloperskich.",
      "devOnly": true,
      "icon": "beaker",
      "sections": []
    }
  ]
}
